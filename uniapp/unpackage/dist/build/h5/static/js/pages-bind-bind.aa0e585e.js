(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bind-bind"],{"19bd":function(t,e,n){"use strict";n.r(e);var i=n("1e90"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},"1e90":function(t,e,n){"use strict";(function(t){n("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar}},name:"cu-custom",computed:{style:function(){var t=this.StatusBar,e=this.CustomBar,n=this.bgImage,i="height:".concat(e,"px;padding-top:").concat(t,"px;");return this.bgImage&&(i="".concat(i,"background-image:url(").concat(n,");")),i}},props:{bgColor:{type:String,default:"bg-white"},isBack:{type:[Boolean,String],default:!0},bgImage:{type:String,default:""},title:{type:String,default:"返回"}},methods:{BackPage:function(){if(getCurrentPages().length<2&&"undefined"!==typeof __wxConfig){var e="/"+__wxConfig.pages[0];return t("log","++++++++"+e," at pages/components/statusBar.vue:55"),uni.redirectTo({url:e})}t("log","000000000000000000000"," at pages/components/statusBar.vue:60"),uni.navigateBack({delta:1})}}};e.default=i}).call(this,n("0de9")["log"])},"69fe":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("StatusBar",{attrs:{title:"绑定手机号",bgColor:"light bg-brown"}}),n("v-uni-view",[n("v-uni-view",{staticClass:"cu-form-group margin-top"},[n("v-uni-view",{staticClass:"title"},[t._v("姓名")]),n("v-uni-input",{staticStyle:{height:"35px"},attrs:{name:"input",type:"text"},model:{value:t.nickName,callback:function(e){t.nickName=e},expression:"nickName"}})],1),n("v-uni-view",{staticClass:"cu-form-group margin-top"},[n("v-uni-view",{staticClass:"title"},[t._v("手机号")]),n("v-uni-input",{staticStyle:{height:"35px"},attrs:{name:"input",type:"text"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),n("v-uni-button",{staticClass:"cu-btn bg-green shadow",attrs:{"open-type":"getPhoneNumber"},on:{getphonenumber:function(e){arguments[0]=e=t.$handleEvent(e),t.getPhoneNumber.apply(void 0,arguments)}}},[t._v("获取手机号")])],1),n("v-uni-view",{staticClass:"cu-form-group margin-top"},[n("v-uni-view",{staticClass:"title"},[t._v("密码")]),n("v-uni-input",{staticStyle:{height:"35px"},attrs:{name:"input",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("v-uni-button",{staticClass:"cu-btn block bg-blue margin-tb-sm lg",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.savePhone.apply(void 0,arguments)}}},[t._v("提交")])],1)],1)},s=[]},"6bda":function(t,e,n){"use strict";(function(t){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("e6ee")),s=n("42e1"),o={components:{StatusBar:a.default},data:function(){return{code:"",sessionKey:"",encryptedData:"",iv:"",OpenId:"",nickName:null,avatarUrl:null,phone:"",password:""}},onLoad:function(e){t("log","option",e," at pages/bind/bind.vue:53"),this.login()},methods:{savePhone:function(){var e={phone:this.phone,password:this.password,nickName:this.nickName};(0,s.bindPhone)(e,(function(e){!0===e.result?(t("log",e," at pages/bind/bind.vue:65"),uni.showToast({title:"绑定成功",duration:2e3,icon:"none"})):uni.showToast({title:"绑定失败",duration:2e3,icon:"none"})}))},login:function(){var e=this;uni.showLoading({title:"登录中..."}),uni.login({provider:"weixin",success:function(n){t("log","登录",n.code," at pages/bind/bind.vue:88"),e.code=n.code;var i=n.code,a="wxcca7a9f80f6ef8f0",o="3c89ceb8d5fbafe337ef7487647f0792",u="https://api.weixin.qq.com/sns/jscode2session?appid="+a+"&secret="+o+"&js_code="+i+"&grant_type=authorization_code";uni.request({url:u,success:function(n){t("log",n," at pages/bind/bind.vue:101"),e.OpenId=n.data.openid,t("log","_this.OpenId------------"+e.OpenId," at pages/bind/bind.vue:103"),e.sessionKey=n.data.session_key,t("log","_this.sessionKey------------"+e.sessionKey," at pages/bind/bind.vue:105"),(0,s.getUserInfo)({},(function(n){!0===n.result?(t("log",n," at pages/bind/bind.vue:108"),t("log",n.data.phone," at pages/bind/bind.vue:109"),e.phone=n.data.phone,e.nickName=n.data.nickName,e.password=n.data.password):uni.showToast({title:"获取手机号失败",duration:2e3,icon:"none"})}))}}),uni.hideLoading()}})},getPhoneNumber:function(e){this.encryptedData=e.detail.encryptedData,this.iv=e.detail.iv,t("log","this.encryptedData:----------"+this.encryptedData," at pages/bind/bind.vue:132"),t("log","this.iv:----------"+this.iv," at pages/bind/bind.vue:133"),t("log","this.sessionKey:----------"+this.sessionKey," at pages/bind/bind.vue:134");var n={encryptedData:this.encryptedData,iv:this.iv,sessionKey:this.sessionKey};(0,s.getPhone)(n,(function(e){!0===e.result?(t("log",e," at pages/bind/bind.vue:143"),uni.showToast({title:"绑定成功",duration:2e3,icon:"none"})):uni.showToast({title:e.msg,duration:2e3,icon:"none"})}))}}};e.default=o}).call(this,n("0de9")["log"])},8760:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"cu-custom",style:[{height:t.CustomBar+"px"}]},[n("v-uni-view",{staticClass:"cu-bar fixed",class:[""!=t.bgImage?"none-bg text-white bg-img":"",t.bgColor],style:t.style},[t.isBack?n("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.BackPage.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"cuIcon-back"}),t._t("backText",[t._v(t._s(t.title))])],2):t._e()],1)],1)},s=[]},"8de9":function(t,e,n){"use strict";n.r(e);var i=n("69fe"),a=n("bbbb");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o,u=n("f0c5"),c=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"397f308a",null,!1,i["a"],o);e["default"]=c.exports},bbbb:function(t,e,n){"use strict";n.r(e);var i=n("6bda"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},e6ee:function(t,e,n){"use strict";n.r(e);var i=n("8760"),a=n("19bd");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);var o,u=n("f0c5"),c=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"0d5d0c7a",null,!1,i["a"],o);e["default"]=c.exports}}]);