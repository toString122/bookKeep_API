(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bind/bind"],{2955:function(e,n,o){"use strict";var t;o.d(n,"b",(function(){return s})),o.d(n,"c",(function(){return i})),o.d(n,"a",(function(){return t}));var s=function(){var e=this,n=e.$createElement;e._self._c},i=[]},"8de9":function(e,n,o){"use strict";o.r(n);var t=o("2955"),s=o("bbbb");for(var i in s)"default"!==i&&function(e){o.d(n,e,(function(){return s[e]}))}(i);var a,c=o("f0c5"),r=Object(c["a"])(s["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],a);n["default"]=r.exports},bbbb:function(e,n,o){"use strict";o.r(n);var t=o("e722"),s=o.n(t);for(var i in t)"default"!==i&&function(e){o.d(n,e,(function(){return t[e]}))}(i);n["default"]=s.a},e722:function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=o("42e1"),s=function(){o.e("pages/components/statusBar").then(function(){return resolve(o("e6ee"))}.bind(null,o)).catch(o.oe)},i={components:{StatusBar:s},data:function(){return{code:"",sessionKey:"",encryptedData:"",iv:"",OpenId:"",nickName:null,avatarUrl:null,phone:"",password:""}},onLoad:function(e){console.log("option",e),this.login()},methods:{savePhone:function(){var n={phone:this.phone,password:this.password,nickName:this.nickName};(0,t.bindPhone)(n,(function(n){!0===n.result?(console.log(n),e.showToast({title:"绑定成功",duration:2e3,icon:"none"})):e.showToast({title:"绑定失败",duration:2e3,icon:"none"})}))},login:function(){var n=this;e.showLoading({title:"登录中..."}),e.login({provider:"weixin",success:function(o){console.log("登录",o.code),n.code=o.code;var s=o.code,i="wxcca7a9f80f6ef8f0",a="3c89ceb8d5fbafe337ef7487647f0792",c="https://api.weixin.qq.com/sns/jscode2session?appid="+i+"&secret="+a+"&js_code="+s+"&grant_type=authorization_code";e.request({url:c,success:function(o){console.log(o),n.OpenId=o.data.openid,console.log("_this.OpenId------------"+n.OpenId),n.sessionKey=o.data.session_key,console.log("_this.sessionKey------------"+n.sessionKey),(0,t.getUserInfo)({},(function(o){!0===o.result?(console.log(o),console.log(o.data.phone),n.phone=o.data.phone,n.nickName=o.data.nickName,n.password=o.data.password):e.showToast({title:"获取手机号失败",duration:2e3,icon:"none"})}))}}),e.hideLoading()}})},getPhoneNumber:function(n){this.encryptedData=n.detail.encryptedData,this.iv=n.detail.iv,console.log("this.encryptedData:----------"+this.encryptedData),console.log("this.iv:----------"+this.iv),console.log("this.sessionKey:----------"+this.sessionKey);var o={encryptedData:this.encryptedData,iv:this.iv,sessionKey:this.sessionKey};(0,t.getPhone)(o,(function(n){!0===n.result?(console.log(n),e.showToast({title:"绑定成功",duration:2e3,icon:"none"})):e.showToast({title:n.msg,duration:2e3,icon:"none"})}))}}};n.default=i}).call(this,o("543d")["default"])},f3fb:function(e,n,o){"use strict";(function(e){o("885c");t(o("66fd"));var n=t(o("8de9"));function t(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=o,e(n.default)}).call(this,o("543d")["createPage"])}},[["f3fb","common/runtime","common/vendor"]]]);